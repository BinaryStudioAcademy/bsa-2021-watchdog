<div class="layout-wrapper">

    <div class="layout-topbar">
        <div class="logo" [routerLink]="['']">
            <img src="assets\logo-white.svg" alt="logo">

        </div>
        <div *ngIf="!user" class="user-info">
            <button pButton pRipple type="button" label="Sign in" class="p-button-outlined sign-in-button"></button>
        </div>
        <div *ngIf="user" class="user-info">
            <img class="user-avatar" [src]="user.avatarUrl ?? 'assets\\avatar.png'" alt="Avatar">
            <div (click)="menu.toggle($event)" class="user-name">{{user.firstName}} {{user.lastName}}</div>
            <p-menu #menu [popup]="true" [model]="userItems"></p-menu>
        </div>
    </div>

    <div class="sidebar">
        <app-organization-menu class="sidebar-avatar"></app-organization-menu>

        <div class="sidebar-top">
            <div>
                <button class="button" routerLink="projects" [routerLinkActive]="['active']">
                    <i class="pi pi-file"></i>
                    <span>Projects</span>
                </button>
            </div>

            <div>
                <button class="button" routerLink="issues" [routerLinkActive]="['active']">
                    <i class="pi pi-exclamation-circle"></i>
                    <span>Issues</span>
                </button>
            </div>

            <div>
                <button class="button" (click)="dashboardsShown = !dashboardsShown">
                    <i class="pi pi-chart-line"></i>
                    <span>Dashboards</span>
                    <i class="pi pi-angle-down" *ngIf="!dashboardsShown"></i>
                    <i class="pi pi-angle-up" *ngIf="dashboardsShown"></i>
                </button>
            </div>

            <div [class.dashboards-none]="!dashboardsShown" [class.dashboards]="dashboardsShown">
                <div *ngFor="let dashboard of dashboards">
                    <button class="button dashboard" [routerLink]="['dashboard', dashboard.id]" [routerLinkActive]="['active']"
                        appTooltipFullName>
                        <i class="pi {{dashboard.icon}}"></i>
                        <span>{{dashboard.name}}</span>
                    </button>
                </div>
                <button class="button dashboard add" (click)="displayModal=true">
                    <i class="pi pi-plus"></i>
                    <span>Add</span>
                </button>
            </div>
        </div>
        <div class="sidebar-bottom">
            <button class="button">
                <i class="pi pi-angle-left"></i>
                <span>Collapse</span>
            </button>
        </div>
    </div>

    <app-add-dashboard *ngIf="displayModal" (save)="addDashboard($event)" (closeModal)="displayModal = !displayModal">
    </app-add-dashboard>

    <div class="home-content-wrp">
        <div class="content">
            <router-outlet></router-outlet>
        </div>
    </div>
</div>